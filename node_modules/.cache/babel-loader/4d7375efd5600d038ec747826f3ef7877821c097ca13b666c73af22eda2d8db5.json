{"ast":null,"code":"var _jsxFileName = \"D:\\\\SARITA\\\\ASSIGNMENTS\\\\Month-Calender\\\\month-planner\\\\src\\\\context\\\\TaskContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// import React, { createContext, useState, useEffect } from \"react\";\n// import { Task } from \"../types/TaskTypes\";\n\n// interface TaskContextProps {\n//   tasks: Task[];\n//   addTask: (task: Task) => void;\n//   updateTask: (task: Task) => void;\n//   moveTaskToDate: (date: Date) => void;\n// }\n\n// export const TaskContext = createContext<TaskContextProps>({\n//   tasks: [],\n//   addTask: () => {},\n//   updateTask: () => {},\n//   moveTaskToDate: () => {},\n// });\n\n// export const TaskProvider = ({ children }: { children: React.ReactNode }) => {\n//   const [tasks, setTasks] = useState<Task[]>([]);\n\n//   // --------------------------\n//   // ✅ Load from localStorage\n//   // --------------------------\n//   useEffect(() => {\n//     const saved = localStorage.getItem(\"tasks\");\n//     if (saved) {\n//       try {\n//         const parsed: Task[] = JSON.parse(saved);\n\n//         // Convert dates back into Date objects\n//         const restored = parsed.map((t) => ({\n//           ...t,\n//           start: new Date(t.start),\n//           end: new Date(t.end),\n//         }));\n\n//         setTasks(restored);\n//       } catch (e) {\n//         console.error(\"❌ FAILED TO LOAD LOCAL STORAGE:\", e);\n//         setTasks([]);\n//       }\n//     }\n//   }, []);\n\n//   // --------------------------\n//   // ✅ Save to localStorage\n//   // --------------------------\n//   useEffect(() => {\n//     if (tasks.length > 0) {\n//       localStorage.setItem(\"tasks\", JSON.stringify(tasks));\n//     }\n//   }, [tasks]);\n\n//   // --------------------------\n//   // ADD TASK\n//   // --------------------------\n//   const addTask = (task: Task) => {\n//     setTasks((prev) => [...prev, task]);\n//   };\n\n//   // --------------------------\n//   // UPDATE TASK\n//   // --------------------------\n//   const updateTask = (task: Task) => {\n//     setTasks((prev) => prev.map((t) => (t.id === task.id ? task : t)));\n//   };\n\n//   // --------------------------\n//   // MOVE TASK BY DRAGGING\n//   // --------------------------\n//   const moveTaskToDate = (newDate: Date) => {\n//     const draggedId = localStorage.getItem(\"drag-task-id\");\n//     if (!draggedId) return;\n\n//     setTasks((prev) =>\n//       prev.map((t) =>\n//         t.id === draggedId\n//           ? {\n//               ...t,\n//               start: newDate,\n//               end: newDate,\n//             }\n//           : t\n//       )\n//     );\n\n//     localStorage.removeItem(\"drag-task-id\");\n//   };\n\n//   return (\n//     <TaskContext.Provider\n//       value={{\n//         tasks,\n//         addTask,\n//         updateTask,\n//         moveTaskToDate,\n//       }}\n//     >\n//       {children}\n//     </TaskContext.Provider>\n//   );\n// };\n\nimport React, { createContext, useContext, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TaskContext = /*#__PURE__*/createContext(undefined);\nexport const useTaskContext = () => {\n  _s();\n  const context = useContext(TaskContext);\n  if (!context) throw new Error(\"useTaskContext must be inside TaskProvider\");\n  return context;\n};\n_s(useTaskContext, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nlet draggingTask = null;\nexport const TaskProvider = ({\n  children\n}) => {\n  _s2();\n  const [tasks, setTasks] = useState(() => {\n    const saved = localStorage.getItem(\"tasks\");\n    return saved ? JSON.parse(saved) : [];\n  });\n  const addTask = task => {\n    const newTasks = [...tasks, task];\n    setTasks(newTasks);\n    localStorage.setItem(\"tasks\", JSON.stringify(newTasks));\n  };\n  const updateTask = updated => {\n    const newTasks = tasks.map(t => t.id === updated.id ? updated : t);\n    setTasks(newTasks);\n    localStorage.setItem(\"tasks\", JSON.stringify(newTasks));\n  };\n  const deleteTask = id => {\n    const newTasks = tasks.filter(t => t.id !== id);\n    setTasks(newTasks);\n    localStorage.setItem(\"tasks\", JSON.stringify(newTasks));\n  };\n  const startDragging = task => {\n    draggingTask = task;\n  };\n  const stopDragging = () => {\n    draggingTask = null;\n  };\n\n  // ✅ FIXED: Now supports dragging with (date, draggedId)\n  const moveTaskToDate = (newDate, draggedTaskId) => {\n    let taskToMove = draggingTask;\n\n    // If context lost the draggingTask, fallback using ID\n    if (!taskToMove && draggedTaskId) {\n      taskToMove = tasks.find(t => t.id === draggedTaskId) || null;\n    }\n    if (!taskToMove) return;\n    const dayDiff = (newDate.getTime() - taskToMove.start.getTime()) / (1000 * 60 * 60 * 24);\n    const updatedTask = {\n      ...taskToMove,\n      start: new Date(taskToMove.start.getTime() + dayDiff * 86400000),\n      end: new Date(taskToMove.end.getTime() + dayDiff * 86400000)\n    };\n    updateTask(updatedTask);\n    draggingTask = null;\n  };\n  const saveTasks = () => {\n    localStorage.setItem(\"tasks\", JSON.stringify(tasks));\n  };\n  const loadTasks = () => {\n    const saved = localStorage.getItem(\"tasks\");\n    if (saved) setTasks(JSON.parse(saved));\n  };\n  return /*#__PURE__*/_jsxDEV(TaskContext.Provider, {\n    value: {\n      tasks,\n      addTask,\n      updateTask,\n      deleteTask,\n      startDragging,\n      stopDragging,\n      moveTaskToDate,\n      saveTasks,\n      loadTasks\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 5\n  }, this);\n};\n_s2(TaskProvider, \"w9gtmXp1QedgpSBiqOQKEbh3Fzs=\");\n_c = TaskProvider;\nvar _c;\n$RefreshReg$(_c, \"TaskProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","jsxDEV","_jsxDEV","TaskContext","undefined","useTaskContext","_s","context","Error","draggingTask","TaskProvider","children","_s2","tasks","setTasks","saved","localStorage","getItem","JSON","parse","addTask","task","newTasks","setItem","stringify","updateTask","updated","map","t","id","deleteTask","filter","startDragging","stopDragging","moveTaskToDate","newDate","draggedTaskId","taskToMove","find","dayDiff","getTime","start","updatedTask","Date","end","saveTasks","loadTasks","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/SARITA/ASSIGNMENTS/Month-Calender/month-planner/src/context/TaskContext.tsx"],"sourcesContent":["// import React, { createContext, useState, useEffect } from \"react\";\r\n// import { Task } from \"../types/TaskTypes\";\r\n\r\n// interface TaskContextProps {\r\n//   tasks: Task[];\r\n//   addTask: (task: Task) => void;\r\n//   updateTask: (task: Task) => void;\r\n//   moveTaskToDate: (date: Date) => void;\r\n// }\r\n\r\n// export const TaskContext = createContext<TaskContextProps>({\r\n//   tasks: [],\r\n//   addTask: () => {},\r\n//   updateTask: () => {},\r\n//   moveTaskToDate: () => {},\r\n// });\r\n\r\n// export const TaskProvider = ({ children }: { children: React.ReactNode }) => {\r\n//   const [tasks, setTasks] = useState<Task[]>([]);\r\n\r\n//   // --------------------------\r\n//   // ✅ Load from localStorage\r\n//   // --------------------------\r\n//   useEffect(() => {\r\n//     const saved = localStorage.getItem(\"tasks\");\r\n//     if (saved) {\r\n//       try {\r\n//         const parsed: Task[] = JSON.parse(saved);\r\n\r\n//         // Convert dates back into Date objects\r\n//         const restored = parsed.map((t) => ({\r\n//           ...t,\r\n//           start: new Date(t.start),\r\n//           end: new Date(t.end),\r\n//         }));\r\n\r\n//         setTasks(restored);\r\n//       } catch (e) {\r\n//         console.error(\"❌ FAILED TO LOAD LOCAL STORAGE:\", e);\r\n//         setTasks([]);\r\n//       }\r\n//     }\r\n//   }, []);\r\n\r\n//   // --------------------------\r\n//   // ✅ Save to localStorage\r\n//   // --------------------------\r\n//   useEffect(() => {\r\n//     if (tasks.length > 0) {\r\n//       localStorage.setItem(\"tasks\", JSON.stringify(tasks));\r\n//     }\r\n//   }, [tasks]);\r\n\r\n//   // --------------------------\r\n//   // ADD TASK\r\n//   // --------------------------\r\n//   const addTask = (task: Task) => {\r\n//     setTasks((prev) => [...prev, task]);\r\n//   };\r\n\r\n//   // --------------------------\r\n//   // UPDATE TASK\r\n//   // --------------------------\r\n//   const updateTask = (task: Task) => {\r\n//     setTasks((prev) => prev.map((t) => (t.id === task.id ? task : t)));\r\n//   };\r\n\r\n//   // --------------------------\r\n//   // MOVE TASK BY DRAGGING\r\n//   // --------------------------\r\n//   const moveTaskToDate = (newDate: Date) => {\r\n//     const draggedId = localStorage.getItem(\"drag-task-id\");\r\n//     if (!draggedId) return;\r\n\r\n//     setTasks((prev) =>\r\n//       prev.map((t) =>\r\n//         t.id === draggedId\r\n//           ? {\r\n//               ...t,\r\n//               start: newDate,\r\n//               end: newDate,\r\n//             }\r\n//           : t\r\n//       )\r\n//     );\r\n\r\n//     localStorage.removeItem(\"drag-task-id\");\r\n//   };\r\n\r\n//   return (\r\n//     <TaskContext.Provider\r\n//       value={{\r\n//         tasks,\r\n//         addTask,\r\n//         updateTask,\r\n//         moveTaskToDate,\r\n//       }}\r\n//     >\r\n//       {children}\r\n//     </TaskContext.Provider>\r\n//   );\r\n// };\r\n\r\n\r\n\r\n\r\n\r\nimport React, { createContext, useContext, useState } from \"react\";\r\nimport { Task } from \"../types/types\";\r\n\r\ntype TaskContextType = {\r\n  tasks: Task[];\r\n  addTask: (task: Task) => void;\r\n  updateTask: (task: Task) => void;\r\n  deleteTask: (id: string) => void;\r\n\r\n  startDragging: (task: Task) => void;\r\n  stopDragging: () => void;\r\n  moveTaskToDate: (newDate: Date, draggedTaskId?: string) => void;\r\n\r\n  saveTasks: () => void;\r\n  loadTasks: () => void;\r\n};\r\n\r\nconst TaskContext = createContext<TaskContextType | undefined>(undefined);\r\n\r\nexport const useTaskContext = () => {\r\n  const context = useContext(TaskContext);\r\n  if (!context) throw new Error(\"useTaskContext must be inside TaskProvider\");\r\n  return context;\r\n};\r\n\r\nlet draggingTask: Task | null = null;\r\n\r\nexport const TaskProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const [tasks, setTasks] = useState<Task[]>(() => {\r\n    const saved = localStorage.getItem(\"tasks\");\r\n    return saved ? JSON.parse(saved) : [];\r\n  });\r\n\r\n  const addTask = (task: Task) => {\r\n    const newTasks = [...tasks, task];\r\n    setTasks(newTasks);\r\n    localStorage.setItem(\"tasks\", JSON.stringify(newTasks));\r\n  };\r\n\r\n  const updateTask = (updated: Task) => {\r\n    const newTasks = tasks.map((t) => (t.id === updated.id ? updated : t));\r\n    setTasks(newTasks);\r\n    localStorage.setItem(\"tasks\", JSON.stringify(newTasks));\r\n  };\r\n\r\n  const deleteTask = (id: string) => {\r\n    const newTasks = tasks.filter((t) => t.id !== id);\r\n    setTasks(newTasks);\r\n    localStorage.setItem(\"tasks\", JSON.stringify(newTasks));\r\n  };\r\n\r\n  const startDragging = (task: Task) => {\r\n    draggingTask = task;\r\n  };\r\n\r\n  const stopDragging = () => {\r\n    draggingTask = null;\r\n  };\r\n\r\n  // ✅ FIXED: Now supports dragging with (date, draggedId)\r\n  const moveTaskToDate = (newDate: Date, draggedTaskId?: string) => {\r\n    let taskToMove = draggingTask;\r\n\r\n    // If context lost the draggingTask, fallback using ID\r\n    if (!taskToMove && draggedTaskId) {\r\n      taskToMove = tasks.find((t) => t.id === draggedTaskId) || null;\r\n    }\r\n\r\n    if (!taskToMove) return;\r\n\r\n    const dayDiff =\r\n      (newDate.getTime() - taskToMove.start.getTime()) /\r\n      (1000 * 60 * 60 * 24);\r\n\r\n    const updatedTask: Task = {\r\n      ...taskToMove,\r\n      start: new Date(taskToMove.start.getTime() + dayDiff * 86400000),\r\n      end: new Date(taskToMove.end.getTime() + dayDiff * 86400000),\r\n    };\r\n\r\n    updateTask(updatedTask);\r\n\r\n    draggingTask = null;\r\n  };\r\n\r\n  const saveTasks = () => {\r\n    localStorage.setItem(\"tasks\", JSON.stringify(tasks));\r\n  };\r\n\r\n  const loadTasks = () => {\r\n    const saved = localStorage.getItem(\"tasks\");\r\n    if (saved) setTasks(JSON.parse(saved));\r\n  };\r\n\r\n  return (\r\n    <TaskContext.Provider\r\n      value={{\r\n        tasks,\r\n        addTask,\r\n        updateTask,\r\n        deleteTask,\r\n        startDragging,\r\n        stopDragging,\r\n        moveTaskToDate,\r\n        saveTasks,\r\n        loadTasks,\r\n      }}\r\n    >\r\n      {children}\r\n    </TaskContext.Provider>\r\n  );\r\n};\r\n"],"mappings":";;;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAMA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAiBnE,MAAMC,WAAW,gBAAGL,aAAa,CAA8BM,SAAS,CAAC;AAEzE,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAClC,MAAMC,OAAO,GAAGR,UAAU,CAACI,WAAW,CAAC;EACvC,IAAI,CAACI,OAAO,EAAE,MAAM,IAAIC,KAAK,CAAC,4CAA4C,CAAC;EAC3E,OAAOD,OAAO;AAChB,CAAC;AAACD,EAAA,CAJWD,cAAc;AAM3B,IAAII,YAAyB,GAAG,IAAI;AAEpC,OAAO,MAAMC,YAAqD,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,GAAA;EACrF,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGd,QAAQ,CAAS,MAAM;IAC/C,MAAMe,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,OAAOF,KAAK,GAAGG,IAAI,CAACC,KAAK,CAACJ,KAAK,CAAC,GAAG,EAAE;EACvC,CAAC,CAAC;EAEF,MAAMK,OAAO,GAAIC,IAAU,IAAK;IAC9B,MAAMC,QAAQ,GAAG,CAAC,GAAGT,KAAK,EAAEQ,IAAI,CAAC;IACjCP,QAAQ,CAACQ,QAAQ,CAAC;IAClBN,YAAY,CAACO,OAAO,CAAC,OAAO,EAAEL,IAAI,CAACM,SAAS,CAACF,QAAQ,CAAC,CAAC;EACzD,CAAC;EAED,MAAMG,UAAU,GAAIC,OAAa,IAAK;IACpC,MAAMJ,QAAQ,GAAGT,KAAK,CAACc,GAAG,CAAEC,CAAC,IAAMA,CAAC,CAACC,EAAE,KAAKH,OAAO,CAACG,EAAE,GAAGH,OAAO,GAAGE,CAAE,CAAC;IACtEd,QAAQ,CAACQ,QAAQ,CAAC;IAClBN,YAAY,CAACO,OAAO,CAAC,OAAO,EAAEL,IAAI,CAACM,SAAS,CAACF,QAAQ,CAAC,CAAC;EACzD,CAAC;EAED,MAAMQ,UAAU,GAAID,EAAU,IAAK;IACjC,MAAMP,QAAQ,GAAGT,KAAK,CAACkB,MAAM,CAAEH,CAAC,IAAKA,CAAC,CAACC,EAAE,KAAKA,EAAE,CAAC;IACjDf,QAAQ,CAACQ,QAAQ,CAAC;IAClBN,YAAY,CAACO,OAAO,CAAC,OAAO,EAAEL,IAAI,CAACM,SAAS,CAACF,QAAQ,CAAC,CAAC;EACzD,CAAC;EAED,MAAMU,aAAa,GAAIX,IAAU,IAAK;IACpCZ,YAAY,GAAGY,IAAI;EACrB,CAAC;EAED,MAAMY,YAAY,GAAGA,CAAA,KAAM;IACzBxB,YAAY,GAAG,IAAI;EACrB,CAAC;;EAED;EACA,MAAMyB,cAAc,GAAGA,CAACC,OAAa,EAAEC,aAAsB,KAAK;IAChE,IAAIC,UAAU,GAAG5B,YAAY;;IAE7B;IACA,IAAI,CAAC4B,UAAU,IAAID,aAAa,EAAE;MAChCC,UAAU,GAAGxB,KAAK,CAACyB,IAAI,CAAEV,CAAC,IAAKA,CAAC,CAACC,EAAE,KAAKO,aAAa,CAAC,IAAI,IAAI;IAChE;IAEA,IAAI,CAACC,UAAU,EAAE;IAEjB,MAAME,OAAO,GACX,CAACJ,OAAO,CAACK,OAAO,CAAC,CAAC,GAAGH,UAAU,CAACI,KAAK,CAACD,OAAO,CAAC,CAAC,KAC9C,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;IAEvB,MAAME,WAAiB,GAAG;MACxB,GAAGL,UAAU;MACbI,KAAK,EAAE,IAAIE,IAAI,CAACN,UAAU,CAACI,KAAK,CAACD,OAAO,CAAC,CAAC,GAAGD,OAAO,GAAG,QAAQ,CAAC;MAChEK,GAAG,EAAE,IAAID,IAAI,CAACN,UAAU,CAACO,GAAG,CAACJ,OAAO,CAAC,CAAC,GAAGD,OAAO,GAAG,QAAQ;IAC7D,CAAC;IAEDd,UAAU,CAACiB,WAAW,CAAC;IAEvBjC,YAAY,GAAG,IAAI;EACrB,CAAC;EAED,MAAMoC,SAAS,GAAGA,CAAA,KAAM;IACtB7B,YAAY,CAACO,OAAO,CAAC,OAAO,EAAEL,IAAI,CAACM,SAAS,CAACX,KAAK,CAAC,CAAC;EACtD,CAAC;EAED,MAAMiC,SAAS,GAAGA,CAAA,KAAM;IACtB,MAAM/B,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIF,KAAK,EAAED,QAAQ,CAACI,IAAI,CAACC,KAAK,CAACJ,KAAK,CAAC,CAAC;EACxC,CAAC;EAED,oBACEb,OAAA,CAACC,WAAW,CAAC4C,QAAQ;IACnBC,KAAK,EAAE;MACLnC,KAAK;MACLO,OAAO;MACPK,UAAU;MACVK,UAAU;MACVE,aAAa;MACbC,YAAY;MACZC,cAAc;MACdW,SAAS;MACTC;IACF,CAAE;IAAAnC,QAAA,EAEDA;EAAQ;IAAAsC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAACxC,GAAA,CApFWF,YAAqD;AAAA2C,EAAA,GAArD3C,YAAqD;AAAA,IAAA2C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}